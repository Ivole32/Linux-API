## 2026-02-15 [1]

Today I implemented new endpoints for managing user states and permissions.  
Admins can now:

- activate users  
- deactivate users  
- change user roles (admin â†” non-admin)

While working on these features, I realized that administrators could potentially **sabotage themselves**, for example by:

- removing their own admin privileges  
- deactivating their own account  
- accidentally deleting critical accounts  

To prevent these scenarios, I will implement safeguards to block self-destructive actions in the next iteration.

To ensure system integrity and protect critical accounts, I introduced an **`immutable` attribute** to the user database. When a user is marked as immutable:

- the account cannot be deleted  
- the account cannot be modified  
- critical permissions cannot be changed  

This guarantees that the main administrator account remains protected and that essential system access cannot be lost.

These changes significantly improve the safety and robustness of the user management system.

### Changelog
- [Fix for 500 error when deactivating yourself](https://ivole32.me/c/e5890b0b5bb5ba3afd889205173ec9)
- [Possible fix for 500 error for chaning user's role](https://ivole32.me/c/0964eff4a09430881a24a3a1225e04)
- [Fix for error when creating default admin user](https://ivole32.me/c/1e03caffa024046a642b78d0fd8f1d)
- [Fixed non default immutable attribute for admin user](https://ivole32.me/c/9e7181f8c3dc8868debbfec344a8b0)
- [Fix for error with api_key](https://ivole32.me/c/e607f69560ecd84b20e1fec3b92b79)
- [Fix for errors with admin creation](https://ivole32.me/c/0ac064d1ee41beba037134bed00bcf)
- [Implemented more user management routes + Added immutable user(s)](https://ivole32.me/c/3313d76bbd3b6edaf2ccfa2bf95690)
- [optimize performance for legacy and v1 routes](https://ivole32.me/c/c2f46ea341c36850caa85fde4657f9)
- [Added devlog 2026-02-14_2](https://ivole32.me/c/43a19e00ee56fdb1b20fe6638cbfe7)